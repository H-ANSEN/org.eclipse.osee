grammar org.eclipse.osee.framework.OseeTypes with org.eclipse.xtext.common.Terminals

generate oseeTypes "http://www.eclipse.org/osee/framework/OseeTypes"


OseeTypeModel :
	(imports+=Import)*
	(types+=OseeType)*;

Import :
	'import' importURI=STRING;
	
terminal WHOLE_NUM_STR: ('0'..'9')+;

NAME_REFERENCE: STRING;
QUALIFIED_NAME : ID ('.' ID)*;

OseeType:
	ArtifactType | RelationType | AttributeType | OseeEnumType;

ArtifactType:
	'abstract'? 'artifactType' name=NAME_REFERENCE ('extends' superArtifactTypes+=ArtifactSuperTypes)? '{'
	    (validAttributeTypes+=AttributeTypeRef)*
	'}';

ArtifactSuperTypes:
	 artifactSuperType=[ArtifactType|NAME_REFERENCE] (',' artifactSuperType=[ArtifactType|NAME_REFERENCE])*;

AttributeTypeRef:
	'attribute' validAttributeType=[AttributeType|NAME_REFERENCE] ('branchGuid' branchGuid=STRING)?;
	
AttributeType:
		'attributeType' name=NAME_REFERENCE ('extends' baseAttributeType=AttributeBaseType) '{'
		'dataProvider' dataProvider = ('DefaultAttributeDataProvider' | 'UriAttributeDataProvider' | 'MappedAttributeDataProvider' | QUALIFIED_NAME)
		'min' min=WHOLE_NUM_STR
		'max' max=(WHOLE_NUM_STR | 'unlimited')
		('taggerId' taggerId = ('DefaultAttributeTaggerProvider' | QUALIFIED_NAME))?
		('enumType' enumType = [OseeEnumType|NAME_REFERENCE])?
		('description' description = STRING)?
		('defaultValue' defaultValue = STRING)?
		('fileExtension' fileExtension = STRING)?
	'}';

AttributeBaseType:
	'BooleanAttribute' | 'CompressedContentAttribute' | 'DateAttribute' | 'EnumeratedAttribute' | 'FloatingPointAttribute' | 'IntegerAttribute' | 'JavaObjectAttribute' | 'StringAttribute' | 'WordAttribute' | QUALIFIED_NAME;

OseeEnumType:
	'oseeEnumType' name=NAME_REFERENCE '{' 
		(enumEntries+=OseeEnumEntry)*
	'}';

OseeEnumEntry:
	'entry' name=STRING (ordinal=WHOLE_NUM_STR)?;

enum RelationMultiplicityEnum :  
ONE_TO_ONE | ONE_TO_MANY | MANY_TO_ONE | MANY_TO_MANY
;

RelationType:
	'relationType' name=NAME_REFERENCE '{'
		'sideAName' sideAName=STRING
		'sideAArtifactType' sideAArtifactType=[ArtifactType|NAME_REFERENCE]
		'sideBName' sideBName=STRING
		'sideBArtifactType' sideBArtifactType=[ArtifactType|NAME_REFERENCE]
		'defaultOrderType' defaultOrderType=('Lexicographical_Ascending' | 'Lexicographical_Descending' | 'Unordered' | ID )
		'multiplicity' multiplicity=RelationMultiplicityEnum
	'}';