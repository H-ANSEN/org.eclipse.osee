<?xml version="1.0" encoding="UTF-8"?>
<project default="RUN_FIRST" name="build">
	
	
	
	<target name="plugin_export">
		<pde.exportPlugins destination="osee_servers_bundles" exportSource="false" exportType="directory" 
			plugins="lba.db.connection,oracle.driver,org.eclipse.osee.framework.artifact.servlet,org.eclipse.osee.framework.branch.management,org.eclipse.osee.framework.branch.management.servlet,org.eclipse.osee.framework.db.connection,org.eclipse.osee.framework.jdk.core,org.eclipse.osee.framework.logging,org.eclipse.osee.framework.resource.common,org.eclipse.osee.framework.resource.locator.attribute,org.eclipse.osee.framework.resource.locator.snapshot,org.eclipse.osee.framework.resource.management,org.eclipse.osee.framework.resource.management.servlet,org.eclipse.osee.framework.resource.provider.attribute,org.eclipse.osee.framework.resource.provider.common,org.eclipse.osee.framework.resource.provider.snapshot,org.eclipse.osee.framework.server.admin,org.postgresql.driver" useJARFormat="true"/>
	</target>
	
	<target name="generateconfigIni">
		<java classname="ConfigIniGeneration" failonerror="true" fork="true">
			<arg value="${basedir}/"/>
			<classpath>
				<pathelement location="buildsupport.jar"/>
				<pathelement path="${java.class.path}"/>
			</classpath>
		</java>
	</target>
	
	<target name="clean">
		<delete includeemptydirs="true">
				    <fileset dir="osee_servers_bundles/configuration" includes="**/*"/>
				  </delete>
				  <delete includeemptydirs="true">
				    <fileset dir="osee_servers_bundles/plugins" includes="**/*"/>
				  </delete>
	</target>
	
	<target name="RUN_FIRST">
		<antcall target="clean"/>
		<antcall target="plugin_export"/>
	</target>
	
	<target name="RUN_SECOND">
		<antcall target="generateconfigIni"/>
	</target>
	
</project>
